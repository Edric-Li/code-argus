# 通用审查规范

> 适用于所有 reviewer agent 的通用规则。

## 核心原则：如实报告置信度

**报告你发现的问题，并诚实标注置信度。** 后续会有验证环节进行二次确认。

- **高置信度 (0.8-1.0)**: 确定是问题，有明确证据
- **中置信度 (0.5-0.8)**: 可能是问题，需要验证确认
- **低置信度 (<0.5)**: 不确定，但值得检查

**不要因为不确定就不报告** —— 漏掉一个真正的 bug 比多报一个疑似问题更糟糕。让验证环节来做最终判断。

## 不要报告的情况

以下类型的"建议"没有价值，无论置信度多高都不要报告：

| 类型       | 示例                             | 为什么不报       |
| ---------- | -------------------------------- | ---------------- |
| 微优化     | "可以用 concat 代替扩展运算符"   | 性能差异可忽略   |
| 纯风格偏好 | "可以提取类型别名"、"可以更明确" | 见仁见智，无对错 |
| 重复检查   | "建议加空值检查"（已经有了）     | 没看懂代码       |
| 无意义建议 | "影响不大"、"轻微损耗"           | 你都说不大了     |

## 报告前的自检

在报告问题前，问自己：

1. **这是潜在的 bug/风险吗？** 如果是，即使不确定也应报告（标注置信度）
2. **我看了调用方/上下文吗？** 如果没有，先去看，再决定置信度
3. **这是客观问题还是主观偏好？** 主观偏好不报告
4. **如果这是真问题，漏掉会有什么后果？** 后果严重的宁可多报

## 必须报告的问题

- 🔴 安全漏洞（SQL注入、XSS、敏感信息泄露）
- 🔴 明确的 bug（空指针、数组越界、逻辑错误）
- 🔴 资源泄漏（未清理的定时器、事件监听、数据库连接）
- 🟡 明显的性能问题（N+1查询、渲染循环中创建对象）
- 🟡 违反项目明确禁止的规则

## 输出质量要求

只输出有价值的问题：

- **没有问题就说"没有发现问题"，不要凑数**
- 每个问题必须有明确的修复建议
- 描述要具体，指出问题在哪一行、是什么
- 不要使用模糊的措辞如"可能"、"建议考虑"
